<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>capitovo — Wirtschaftskalender</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <style>
        /* Remove black outline from sidebar toggle */
        #menu-toggle, .menu-toggle { border: none; outline: none; background: transparent; }
        #menu-toggle:focus, .menu-toggle:focus { outline: none; box-shadow: none; }
        #menu-toggle:focus-visible, .menu-toggle:focus-visible { box-shadow: 0 0 0 4px rgba(59,130,246,0.12); border-radius: 8px; }

        /* Page layout */
        /* Schlichteres, neutraleres Farbset für den Kalender */
        :root { --page-white: #ffffff; --muted-white: #fbfbfc; --cap-primary: #0b1220; --cap-accent: #6b7280; --cap-text: #0f172a; --cap-muted: #94a3b8; --cap-success: #059669; --cap-warning: #d97706; }
        body { background: var(--muted-white); }
        main { background: transparent; padding-top: 18px; }

        /* Paywall overlay for non-subscribers */
        .paywall-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); z-index: 9999; display: none; align-items: center; justify-content: center; }
        .paywall-overlay.active { display: flex; }
        .paywall-content { background: white; border-radius: 16px; padding: 3rem 2.5rem; max-width: 460px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.12); position: relative; border: 1px solid rgba(36, 53, 75, 0.08); }
        .paywall-lock-icon { width: 56px; height: 56px; margin: 0 auto 1.5rem; background: #f1f5f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; }
        .paywall-lock-icon svg { width: 28px; height: 28px; stroke: #64748b; }
        .paywall-content h2 { font-size: 1.5rem; font-weight: 700; color: #0f172a; margin-bottom: 0.75rem; letter-spacing: -0.02em; }
        .paywall-content p { color: #64748b; font-size: 0.95rem; margin-bottom: 2rem; line-height: 1.6; }
        .paywall-cta { background: #24354b; color: white; padding: 13px 28px; border-radius: 8px; font-weight: 600; font-size: 0.95rem; border: none; cursor: pointer; transition: all 0.2s; text-decoration: none; display: inline-block; }
        .paywall-cta:hover { background: #1a2838; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(36, 53, 75, 0.2); }
        .paywall-features { text-align: left; margin: 1.75rem 0 2rem; padding-left: 0.5rem; }
        .paywall-feature { display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 0.85rem; color: #475569; font-size: 0.9rem; line-height: 1.4; }
        .paywall-feature svg { color: #64748b; flex-shrink: 0; margin-top: 2px; width: 18px; height: 18px; }
        
        /* Blur content for non-subscribers */
        body.paywall-active main { filter: blur(8px); pointer-events: none; user-select: none; }
        body.paywall-active header { filter: blur(4px); }
        body.paywall-active footer { filter: blur(4px); }
        
        .earnings-layout { max-width: 1200px; margin: 0 auto; padding-left: 20px; padding-right: 20px; box-sizing: border-box; }

        /* Hero section */
        .earnings-hero { background: var(--page-white); border-radius: 12px; padding: 2rem; margin-bottom: 1.5rem; box-shadow: 0 6px 20px rgba(2,6,23,0.06); }
        .earnings-hero h1 { margin: 0 0 12px 0; font-weight: 700; color: #0f172a; font-size: clamp(1.6rem, 2.5vw, 2.2rem); line-height: 1.1; }
        .earnings-hero .subtitle { color: #475569; font-size: 1rem; max-width: 70ch; margin-bottom: 1.5rem; }
        
        /* Filter bar */
        .filter-bar { background: var(--page-white); border-radius: 10px; padding: 1rem; margin-bottom: 1.5rem; box-shadow: 0 4px 16px rgba(2,6,23,0.05); }
        .filter-bar .filter-row { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; }
        .filter-bar label { font-weight: 600; font-size: 0.9rem; color: #0f172a; white-space: nowrap; }
        .filter-bar select { height: 40px; padding: 0 12px; border-radius: 8px; border: 1px solid rgba(15,23,42,0.08); background: white; font-size: 0.95rem; color: #0f172a; min-width: 180px; }
        
        /* Calendar view toggle */
        .view-toggle { display: flex; gap: 0.5rem; background: #f1f5f9; padding: 4px; border-radius: 8px; }
        .view-toggle button { padding: 8px 16px; border-radius: 6px; border: none; background: transparent; font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; color: #64748b; }
        .view-toggle button.active { background: white; color: #0f172a; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
        .view-toggle button:hover:not(.active) { color: #0f172a; }

        /* Calendar grid */
        .calendar-container { background: var(--page-white); border: 1px solid #e5e7eb; border-radius: 8px; padding: 1.5rem; }
        .calendar-header { display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; }
        .calendar-header .day-name { text-align: center; font-weight: 600; color: var(--cap-muted); font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background: #e5e7eb; border: 1px solid #e5e7eb; }
        .calendar-day { background: var(--page-white); min-height: 100px; padding: 0.5rem; transition: background 0.12s; position: relative; display: flex; flex-direction: column; border: 1px solid rgba(15,23,42,0.03); }
        .calendar-day:hover { background: #fbfbfb; }
        .calendar-day.other-month { background: #fbfbfc; opacity: 0.55; }
        .calendar-day.today { outline: 2px solid rgba(99,102,241,0.06); box-shadow: inset 0 0 0 1px rgba(99,102,241,0.03); }
        .calendar-day.today .day-number { color: var(--cap-primary); font-weight: 700; }

        .day-number { font-weight: 500; color: var(--cap-text); font-size: 0.875rem; margin-bottom: 0.5rem; }
        .calendar-day.other-month .day-number { color: #d1d5db; }

        .calendar-day.has-events .day-number { font-weight: 600; }

        .event-count { position: absolute; top: 0.25rem; right: 0.25rem; background: var(--cap-muted); color: white; font-size: 0.675rem; font-weight: 600; min-width: 18px; height: 18px; border-radius: 9px; display: flex; align-items: center; justify-content: center; padding: 0 5px; }
        
        /* Earnings events in calendar */
        /* Schlichtere Event-Darstellung: nur Kürzel sichtbar, keine starken Farben */
        .earnings-event { background: transparent; color: var(--cap-primary); padding: 2px 0; margin-bottom: 4px; font-size: 0.85rem; font-weight: 700; cursor: pointer; transition: color 0.12s; text-align: left; }
        .earnings-event:hover { color: var(--cap-accent); }
        .earnings-event.pre-market, .earnings-event.after-market { background: transparent; }
        .earnings-event.high { text-decoration: underline; }

        .earnings-event .time-icon { display: none; }
        
        /* List view */
        .earnings-list { background: var(--page-white); border-radius: 12px; box-shadow: 0 6px 20px rgba(2,6,23,0.06); overflow: hidden; }
        .earnings-list-header { background: #f8fafc; padding: 1rem 1.5rem; border-bottom: 1px solid #e2e8f0; display: grid; grid-template-columns: 150px 200px 1fr 120px 120px 100px; gap: 1rem; font-weight: 700; color: #64748b; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .earnings-list-row { padding: 1.25rem 1.5rem; border-bottom: 1px solid #f1f5f9; display: grid; grid-template-columns: 150px 200px 1fr 120px 120px 100px; gap: 1rem; align-items: center; transition: all 0.2s; }
        .earnings-list-row:hover { background: #f8fafc; }
        .earnings-list-row:last-child { border-bottom: none; }
        
        .earnings-date { font-weight: 600; color: #0f172a; }
        .company-info { display: flex; align-items: center; gap: 0.75rem; }
        .company-logo { width: 40px; height: 40px; border-radius: 8px; object-fit: cover; background: #f1f5f9; }
        .company-name { font-weight: 600; color: #0f172a; }
        .ticker { color: #64748b; font-size: 0.9rem; }
        
        .estimate { font-weight: 600; color: #0f172a; }
        .time-badge { display: inline-block; padding: 4px 10px; border-radius: 999px; font-size: 0.8rem; font-weight: 600; }
        .time-badge.pre { background: #d1fae5; color: #065f46; }
        .time-badge.market { background: #dbeafe; color: #1e40af; }
        .time-badge.after { background: #fed7aa; color: #92400e; }
        
        .importance-badge { padding: 4px 10px; border-radius: 999px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .importance-badge.high { background: #fee2e2; color: #991b1b; }
        .importance-badge.medium { background: #fef3c7; color: #92400e; }
        .importance-badge.low { background: #e0e7ff; color: #3730a3; }

        /* Event Details Modal */
        .event-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.35); z-index: 10000; display: none; align-items: center; justify-content: center; }
        .event-modal.active { display: flex; }
        .event-modal-content { background: white; border-radius: 8px; padding: 1.25rem; max-width: 420px; width: 90%; box-shadow: 0 8px 20px rgba(0,0,0,0.06); border: 1px solid #eef2f7; }
        .event-modal-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.25rem; padding-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; }
        .event-modal-title { font-size: 1.125rem; font-weight: 600; color: var(--cap-text); }
        .event-modal-close { background: transparent; border: none; width: 28px; height: 28px; cursor: pointer; font-size: 1.25rem; color: var(--cap-muted); }
        .event-modal-close:hover { color: var(--cap-text); }
        .event-detail-row { display: flex; justify-content: space-between; padding: 0.625rem 0; }
        .event-detail-row:not(:last-child) { border-bottom: 1px solid #f3f4f6; }
        .event-detail-label { color: #6b7280; font-weight: 500; font-size: 0.875rem; }
        .event-detail-value { color: #111827; font-weight: 600; font-size: 0.875rem; }

        /* Responsive */
        @media (max-width: 1024px) {
            .calendar-grid { grid-template-columns: repeat(7, 1fr); }
            .calendar-day { min-height: 100px; padding: 0.5rem; }
            .earnings-list-header, .earnings-list-row { grid-template-columns: 1fr; gap: 0.5rem; }
            .earnings-list-header { display: none; }
            .earnings-list-row { padding: 1rem; }
        }
        
        @media (max-width: 640px) {
            .calendar-day { min-height: 80px; padding: 0.4rem; font-size: 0.8rem; }
            .earnings-event { font-size: 0.7rem; padding: 4px 6px; }
            .filter-bar .filter-row { flex-direction: column; align-items: stretch; }
            .filter-bar select { width: 100%; }
        }

        /* Stats cards */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
        .stat-card { background: var(--page-white); border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 16px rgba(2,6,23,0.05); border-left: 4px solid #3b82f6; }
        .stat-card.green { border-left-color: #10b981; }
        .stat-card.orange { border-left-color: #f59e0b; }
        .stat-card.purple { border-left-color: #8b5cf6; }
        .stat-label { color: #64748b; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem; }
        .stat-value { color: #0f172a; font-size: 2rem; font-weight: 700; }
        .stat-subtext { color: #64748b; font-size: 0.85rem; margin-top: 0.25rem; }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <a href="./abonenten.html">
                    <img src="../caitavo_logo_weiß.png" alt="capitovo Logo" class="header-logo">
                </a>
            </div>
            <button class="menu-toggle" id="menu-toggle" aria-controls="sidebar" aria-expanded="false" aria-label="Menü öffnen">☰</button>
        </div>
    </header>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar" aria-hidden="true" aria-label="Seitenmenü">
        <button class="close-button" id="close-sidebar" aria-label="Sidebar schließen">&times;</button>
        <nav class="sidebar-nav" aria-label="Hauptnavigation">
            <ul>
                <li>
                    <a href="https://kw-f8.github.io/capitovo/Abonenten/abonenten.html" class="flex items-center space-x-3" aria-label="Startseite">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M3 11.5L12 4l9 7.5" />
                            <path d="M5 10.5v8a1 1 0 001 1h3v-6h6v6h3a1 1 0 001-1v-8" />
                        </svg>
                        <span>Startseite</span>
                    </a>
                </li>
                <li>
                    <div>
                        <a href="./konto.html" class="flex items-center space-x-3" aria-label="Mein Konto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="12" cy="8" r="3" />
                                <path d="M6 20c0-3.333 3.333-6 6-6s6 2.667 6 6" />
                            </svg>
                            <span>Mein Konto</span>
                        </a>
                    </div>
                </li>
                <li>
                    <a href="./alle_analysen.html" class="flex items-center space-x-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="10" width="4" height="11" rx="0.5" /><rect x="10" y="6" width="4" height="15" rx="0.5" /><rect x="17" y="3" width="4" height="18" rx="0.5" /></svg>
                        <span>Analysen</span>
                    </a>
                </li>
                <li>
                    <a href="./earnings_kalender.html" class="flex items-center space-x-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <span>Wirtschaftskalender</span>
                    </a>
                </li>
                
                <li class="logout-bottom">
                    <a href="./kontaktdaten.html" class="flex items-center space-x-3">
                        <svg class="w-5 h-5 flex-shrink-0" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                            <path d="M22 6l-10 7L2 6" />
                        </svg>
                        <span>Kontakt</span>
                    </a>
                </li>
                
                <li class="logout-bottom">
                    <a href="#" id="logout-link" class="logout-link" aria-label="Abmelden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <path d="M16 17l5-5-5-5" />
                            <path d="M21 12H9" />
                        </svg>
                        <span>Abmelden</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Paywall Overlay -->
    <div class="paywall-overlay" id="paywall-overlay">
        <div class="paywall-content">
            <div class="paywall-lock-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
            </div>
            <h2>Nur für Abonnenten</h2>
            <p>Der Wirtschaftskalender ist exklusiv für capitovo Mitglieder verfügbar.</p>
            
            <div class="paywall-features">
                <div class="paywall-feature">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    <span>Vollständiger Wirtschaftskalender</span>
                </div>
                <div class="paywall-feature">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    <span>Pre- & After-Market Zeitpunkte</span>
                </div>
                <div class="paywall-feature">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    <span>EPS Estimates & Analysen</span>
                </div>
                <div class="paywall-feature">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    <span>Portfolio-Filter & Alerts</span>
                </div>
            </div>

            <a href="../checkout.html" class="paywall-cta">Jetzt Abonnieren</a>
            <p id="paywall-price-text" style="margin-top: 1.25rem; font-size: 0.85rem; color: #94a3b8;">Ab 99€/Monat · Jederzeit kündbar</p>
        </div>
    </div>

    <main>
        <div class="earnings-layout">
            <!-- Hero Section -->
            <div class="earnings-hero">
                <h1 style="display: flex; align-items: center; gap: 0.5rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #0f172a;">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Wirtschaftskalender
                </h1>
                <p class="subtitle">Bleib auf dem Laufenden! Alle wichtigen Wirtschaftstermine, Quartalszahlen und Unternehmensmeldungen übersichtlich an einem Ort.</p>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Diese Woche</div>
                        <div class="stat-value" id="stat-week">12</div>
                        <div class="stat-subtext">Wirtschaftstermine</div>
                    </div>
                    <div class="stat-card green">
                        <div class="stat-label">Pre-Market</div>
                        <div class="stat-value" id="stat-pre">5</div>
                        <div class="stat-subtext">Vor Börseneröffnung</div>
                    </div>
                    <div class="stat-card orange">
                        <div class="stat-label">After-Market</div>
                        <div class="stat-value" id="stat-after">7</div>
                        <div class="stat-subtext">Nach Börsenschluss</div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-label">High Importance</div>
                        <div class="stat-value" id="stat-high">8</div>
                        <div class="stat-subtext">Portfolio-Relevante</div>
                    </div>
                </div>
            </div>

            <!-- Filter Bar -->
            <div class="filter-bar">
                <div class="filter-row">
                    <label for="month-select">Monat:</label>
                    <select id="month-select">
                        <option value="2025-12">Dezember 2025</option>
                        <option value="2026-01">Januar 2026</option>
                        <option value="2026-02">Februar 2026</option>
                        <option value="2026-03">März 2026</option>
                    </select>

                    <label for="sector-filter">Sektor:</label>
                    <select id="sector-filter">
                        <option value="all">Alle Sektoren</option>
                        <option value="tech">Technologie</option>
                        <option value="consumer">Zyklischer Konsum</option>
                        <option value="finance">Finanzwerte</option>
                        <option value="healthcare">Gesundheit</option>
                        <option value="energy">Energie</option>
                    </select>

                    <label for="importance-filter">Wichtigkeit:</label>
                    <select id="importance-filter">
                        <option value="all">Alle</option>
                        <option value="high">Hoch</option>
                        <option value="medium">Mittel</option>
                        <option value="low">Niedrig</option>
                    </select>

                    <div class="view-toggle">
                        <button id="view-calendar" class="active">Kalender</button>
                        <button id="view-list">Liste</button>
                    </div>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="calendar-container" id="calendar-view">
                <div class="calendar-header">
                    <div class="day-name">Mo</div>
                    <div class="day-name">Di</div>
                    <div class="day-name">Mi</div>
                    <div class="day-name">Do</div>
                    <div class="day-name">Fr</div>
                    <div class="day-name">Sa</div>
                    <div class="day-name">So</div>
                </div>
                <div class="calendar-grid" id="calendar-grid">
                    <!-- Calendar days will be generated by JavaScript -->
                </div>
            </div>

            <!-- Event Details Modal -->
            <div class="event-modal" id="event-modal">
                <div class="event-modal-content">
                    <div class="event-modal-header">
                        <div class="event-modal-title" id="modal-company-name">Tesla</div>
                        <button class="event-modal-close" onclick="closeEventModal()">✕</button>
                    </div>
                    <div class="event-detail-row">
                        <span class="event-detail-label">Ticker:</span>
                        <span class="event-detail-value" id="modal-ticker">TSLA</span>
                    </div>
                    <div class="event-detail-row">
                        <span class="event-detail-label">Datum:</span>
                        <span class="event-detail-value" id="modal-date">2. Dezember 2025</span>
                    </div>
                    <div class="event-detail-row">
                        <span class="event-detail-label">Zeit:</span>
                        <span class="event-detail-value" id="modal-time">After-Market</span>
                    </div>
                    <div class="event-detail-row">
                        <span class="event-detail-label">EPS Schätzung:</span>
                        <span class="event-detail-value" id="modal-eps">$0.85</span>
                    </div>
                    <div class="event-detail-row">
                        <span class="event-detail-label">Sektor:</span>
                        <span class="event-detail-value" id="modal-sector">Technologie</span>
                    </div>
                    <div class="event-detail-row">
                        <span class="event-detail-label">Wichtigkeit:</span>
                        <span class="event-detail-value" id="modal-importance">High</span>
                    </div>
                </div>
            </div>

            <!-- List View -->
            <div class="earnings-list" id="list-view" style="display: none;">
                <div class="earnings-list-header">
                    <div>Datum</div>
                    <div>Unternehmen</div>
                    <div>Sektor</div>
                    <div>EPS Estimate</div>
                    <div>Zeitpunkt</div>
                    <div>Wichtigkeit</div>
                </div>
                <div id="list-container">
                    <!-- List rows will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer border-t py-6 mt-12">
        <div class="footer-inner max-w-6xl mx-auto px-6 text-sm text-gray-500 flex items-center justify-between">
            <div>&copy; 2025 capitovo — Alle Rechte vorbehalten.</div>
            <div class="footer-links">
                <a href="../Rechtliches/impressum.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Impressum</a>
                <a href="../Rechtliches/datenschutz.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Datenschutz</a>
                <a href="../Rechtliches/haftung.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Haftungsausschluss</a>
                <a href="../Rechtliches/agb.html" class="footer-btn" target="_blank" rel="noopener noreferrer">AGB</a>
            </div>
        </div>
    </footer>

    <script>
        // Financial Modeling Prep API Configuration
        const USE_PROXY = true; // Set to true to use local proxy (bypasses CORS)
        const PROXY_URL = 'http://localhost:3000'; // Local proxy server
        const FMP_API_KEY = 'OQ6IIDD26Cnm3fPtXiQw8O05ZAaBPFRI';
        const FMP_BASE_URL = 'https://financialmodelingprep.com/api/v3';
        const CACHE_KEY = 'capitovo_earnings_cache';
        const CACHE_DURATION = 6 * 60 * 60 * 1000; // 6 Stunden in Millisekunden
        
        // Global earnings data - will be populated from API or cache
        let earningsData = [];
        let isLoadingData = false;

        // Fetch earnings calendar from FMP API (with caching to save API calls)
        async function fetchEarningsCalendar(fromDate, toDate) {
            if (isLoadingData) return;
            
            // Check cache first
            const cachedData = getCachedEarnings();
            if (cachedData) {
                console.log('Using cached earnings data (reduces API calls)');
                earningsData = cachedData;
                return;
            }
            
            isLoadingData = true;
            
            try {
                // Format dates as YYYY-MM-DD
                const from = fromDate || new Date().toISOString().split('T')[0];
                const to = toDate || new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
                
                // Use proxy if enabled (bypasses CORS), otherwise direct API call
                let url;
                if (USE_PROXY) {
                    url = `${PROXY_URL}/earnings-calendar?from=${from}&to=${to}`;
                    console.log('Fetching via PROXY:', url);
                } else {
                    url = `${FMP_BASE_URL}/earning_calendar?from=${from}&to=${to}&apikey=${FMP_API_KEY}`;
                    console.log('Fetching DIRECT from FMP API:', url);
                }
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                console.log('API Response Status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('API Error Response:', errorText);
                    throw new Error(`FMP API Error: ${response.status} - ${errorText}`);
                }
                
                const data = await response.json();
                console.log(`Loaded ${data.length} earnings events from FMP`);
                
                // Transform FMP data to our format
                earningsData = data.map(event => {
                    // Determine sector from FMP data (simplified mapping)
                    const sector = determineSector(event.symbol);
                    
                    // Determine time of day (FMP provides 'time' field: bmo=before market open, amc=after market close)
                    let time = 'market'; // default
                    if (event.time) {
                        if (event.time.toLowerCase().includes('bmo') || event.time.toLowerCase().includes('before')) {
                            time = 'pre';
                        } else if (event.time.toLowerCase().includes('amc') || event.time.toLowerCase().includes('after')) {
                            time = 'after';
                        }
                    }
                    
                    // Determine importance based on market cap or portfolio relevance
                    const importance = determineImportance(event.symbol, event.marketCap);
                    
                    return {
                        date: event.date,
                        company: event.name || event.symbol,
                        ticker: event.symbol,
                        sector: sector,
                        estimate: event.epsEstimated ? `$${event.epsEstimated.toFixed(2)}` : 'N/A',
                        revenue: event.revenueEstimated ? formatRevenue(event.revenueEstimated) : null,
                        time: time,
                        importance: importance,
                        fiscalDateEnding: event.fiscalDateEnding,
                        updatedFromPrior: event.updatedFromDate
                    };
                }).filter(e => e.ticker); // Remove entries without ticker
                
                // Sort by date
                earningsData.sort((a, b) => new Date(a.date) - new Date(b.date));
                
                // Save to cache (6h expiry) to reduce API calls
                saveCachedEarnings(earningsData);
                
                // Re-render calendar and stats
                const currentDate = new Date();
                generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
                updateStats();
                
                // If list view is active, re-render it
                if (listView.style.display !== 'none') {
                    renderListView();
                }
                
                console.log('Earnings calendar updated successfully');
                
            } catch (error) {
                console.error('Error fetching earnings data:', error);
                console.error('Error details:', error.message);
                
                // Try to use old cache as fallback
                const oldCache = localStorage.getItem(CACHE_KEY);
                if (oldCache) {
                    try {
                        const parsed = JSON.parse(oldCache);
                        earningsData = parsed.data || [];
                        console.log('Using expired cache as fallback');
                        return;
                    } catch (e) {
                        console.error('Cache fallback failed:', e);
                    }
                }
                
                // Load demo data as last resort
                console.log('Loading demo data as fallback...');
                earningsData = getDemoEarningsData();
                saveCachedEarnings(earningsData); // Cache demo data
                
                // Show user-friendly message
                const calendarGrid = document.getElementById('calendar-grid');
                if (calendarGrid) {
                    const notice = document.createElement('div');
                    notice.style.cssText = 'grid-column: 1 / -1; background: #fef3c7; padding: 1rem; border-radius: 8px; text-align: center; color: #92400e; font-weight: 600; margin-bottom: 1rem;';
                    notice.innerHTML = '⚠️ API-Verbindung fehlgeschlagen. Demo-Daten werden angezeigt.';
                    calendarGrid.parentElement.insertBefore(notice, calendarGrid);
                }
            } finally {
                isLoadingData = false;
            }
        }

        // Demo data for testing/fallback
        function getDemoEarningsData() {
            const today = new Date();
            const demoData = [];
            
            // Generate demo events for next 30 days
            const companies = [
                { ticker: 'AAPL', company: 'Apple Inc.', sector: 'tech', importance: 'high', estimate: '$2.10' },
                { ticker: 'MSFT', company: 'Microsoft Corp.', sector: 'tech', importance: 'high', estimate: '$2.75' },
                { ticker: 'TSLA', company: 'Tesla Inc.', sector: 'consumer', importance: 'high', estimate: '$0.85' },
                { ticker: 'NVDA', company: 'NVIDIA Corp.', sector: 'tech', importance: 'high', estimate: '$0.95' },
                { ticker: 'AMZN', company: 'Amazon.com Inc.', sector: 'consumer', importance: 'high', estimate: '$1.20' },
                { ticker: 'META', company: 'Meta Platforms', sector: 'tech', importance: 'high', estimate: '$4.50' },
                { ticker: 'GOOGL', company: 'Alphabet Inc.', sector: 'tech', importance: 'high', estimate: '$1.65' },
                { ticker: 'JNJ', company: 'Johnson & Johnson', sector: 'healthcare', importance: 'high', estimate: '$2.35' },
                { ticker: 'JPM', company: 'JPMorgan Chase', sector: 'finance', importance: 'medium', estimate: '$3.20' },
                { ticker: 'V', company: 'Visa Inc.', sector: 'finance', importance: 'medium', estimate: '$2.15' }
            ];
            
            for (let i = 0; i < 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                // Add 1-3 random events per day
                const eventsPerDay = Math.floor(Math.random() * 3) + 1;
                for (let j = 0; j < eventsPerDay; j++) {
                    const company = companies[Math.floor(Math.random() * companies.length)];
                    const time = Math.random() > 0.5 ? 'after' : 'pre';
                    
                    demoData.push({
                        date: date.toISOString().split('T')[0],
                        company: company.company,
                        ticker: company.ticker,
                        sector: company.sector,
                        estimate: company.estimate,
                        time: time,
                        importance: company.importance
                    });
                }
            }
            
            return demoData.sort((a, b) => new Date(a.date) - new Date(b.date));
        }

        // Cache Management Functions (to save API calls - Free Tier: 250/day)
        function getCachedEarnings() {
            try {
                const cached = localStorage.getItem(CACHE_KEY);
                if (!cached) return null;
                
                const parsed = JSON.parse(cached);
                const now = Date.now();
                
                // Check if cache is still valid (6 hours)
                if (now - parsed.timestamp < CACHE_DURATION) {
                    console.log(`Cache valid for ${Math.round((CACHE_DURATION - (now - parsed.timestamp)) / 1000 / 60)} more minutes`);
                    return parsed.data;
                }
                
                // Cache expired
                console.log('Cache expired, fetching fresh data');
                return null;
            } catch (e) {
                console.error('Cache read error:', e);
                return null;
            }
        }

        function saveCachedEarnings(data) {
            try {
                const cacheObject = {
                    data: data,
                    timestamp: Date.now()
                };
                localStorage.setItem(CACHE_KEY, JSON.stringify(cacheObject));
                console.log('Earnings data cached for 6 hours');
            } catch (e) {
                console.error('Cache write error:', e);
            }
        }

        // Helper: Determine sector based on ticker (simplified)
        function determineSector(ticker) {
            const techTickers = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'META', 'NVDA', 'AMD', 'INTC', 'CRM', 'ORCL', 'ADBE', 'CSCO', 'IBM', 'SAP'];
            const consumerTickers = ['AMZN', 'TSLA', 'NFLX', 'DIS', 'NKE', 'SBUX', 'MCD', 'HD'];
            const financeTickers = ['JPM', 'BAC', 'GS', 'MS', 'WFC', 'C', 'BLK', 'AXP'];
            const healthTickers = ['JNJ', 'UNH', 'PFE', 'ABBV', 'TMO', 'MRK', 'LLY'];
            const energyTickers = ['XOM', 'CVX', 'COP', 'SLB', 'EOG'];
            
            if (techTickers.includes(ticker)) return 'tech';
            if (consumerTickers.includes(ticker)) return 'consumer';
            if (financeTickers.includes(ticker)) return 'finance';
            if (healthTickers.includes(ticker)) return 'healthcare';
            if (energyTickers.includes(ticker)) return 'energy';
            
            return 'other';
        }

        // Helper: Determine importance (high/medium/low)
        function determineImportance(ticker, marketCap) {
            // Portfolio stocks (from capitovo analyses) = high importance
            const portfolioStocks = ['TSLA', 'AAPL', 'MSFT', 'AMZN', 'NVDA', 'META', 'GOOGL', 'GOOG', 'JNJ', 'SAP'];
            
            if (portfolioStocks.includes(ticker)) {
                return 'high';
            }
            
            // Large cap (>200B) = medium
            if (marketCap && marketCap > 200000000000) {
                return 'medium';
            }
            
            // Everything else = low
            return 'low';
        }

        // Helper: Format revenue numbers
        function formatRevenue(revenue) {
            if (revenue >= 1e9) {
                return `$${(revenue / 1e9).toFixed(2)}B`;
            } else if (revenue >= 1e6) {
                return `$${(revenue / 1e6).toFixed(2)}M`;
            }
            return `$${revenue.toFixed(0)}`;
        }

        // View toggle
        const viewCalendarBtn = document.getElementById('view-calendar');
        const viewListBtn = document.getElementById('view-list');
        const calendarView = document.getElementById('calendar-view');
        const listView = document.getElementById('list-view');

        viewCalendarBtn.addEventListener('click', () => {
            viewCalendarBtn.classList.add('active');
            viewListBtn.classList.remove('active');
            calendarView.style.display = 'block';
            listView.style.display = 'none';
        });

        viewListBtn.addEventListener('click', () => {
            viewListBtn.classList.add('active');
            viewCalendarBtn.classList.remove('active');
            calendarView.style.display = 'none';
            listView.style.display = 'block';
            renderListView();
        });

        // Generate calendar
        function generateCalendar(year, month) {
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // Monday = 0

            const calendarGrid = document.getElementById('calendar-grid');
            calendarGrid.innerHTML = '';

            // Previous month days
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = startingDayOfWeek - 1; i >= 0; i--) {
                const day = prevMonthLastDay - i;
                const dayDiv = createDayElement(day, true);
                calendarGrid.appendChild(dayDiv);
            }

            // Current month days
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const currentDate = new Date(year, month, day);
                const isToday = currentDate.toDateString() === today.toDateString();
                const dayDiv = createDayElement(day, false, isToday, currentDate);
                calendarGrid.appendChild(dayDiv);
            }

            // Next month days
            const remainingDays = 42 - (startingDayOfWeek + daysInMonth);
            for (let day = 1; day <= remainingDays; day++) {
                const dayDiv = createDayElement(day, true);
                calendarGrid.appendChild(dayDiv);
            }
        }

        function createDayElement(day, isOtherMonth, isToday = false, date = null) {
            const dayDiv = document.createElement('div');
            dayDiv.className = 'calendar-day';
            if (isOtherMonth) dayDiv.classList.add('other-month');
            if (isToday) dayDiv.classList.add('today');

            const dayNumber = document.createElement('div');
            dayNumber.className = 'day-number';
            dayNumber.textContent = day;
            dayDiv.appendChild(dayNumber);

            // Add earnings events if date exists
            if (date) {
                const dateStr = date.toISOString().split('T')[0];
                const events = earningsData.filter(e => e.date === dateStr);
                
                if (events.length > 0) {
                    dayDiv.classList.add('has-events');
                    
                    // Check if any high-importance events
                    const hasHighImportance = events.some(e => e.importance === 'high');
                    if (hasHighImportance) {
                        dayDiv.classList.add('high-importance');
                    }
                    
                    // Show max 3 events, then show count
                    const visibleEvents = events.slice(0, 3);
                    visibleEvents.forEach(event => {
                        const eventDiv = document.createElement('div');
                        eventDiv.className = `earnings-event ${event.time}-market`;
                        if (event.importance === 'high') {
                            eventDiv.classList.add('high');
                        }
                        
                        // Nur Kürzel anzeigen (ohne Zeit-Icon) — schlankes Layout
                        eventDiv.textContent = event.ticker ? event.ticker.toUpperCase() : event.ticker;
                        eventDiv.title = `${event.company}\nEPS: ${event.estimate}\n${event.time === 'pre' ? 'Pre-Market' : event.time === 'after' ? 'After-Market' : 'Während Handelszeit'}`;
                        
                        // Click to show details
                        eventDiv.addEventListener('click', (e) => {
                            e.stopPropagation();
                            showEventDetails(event);
                        });
                        
                        dayDiv.appendChild(eventDiv);
                    });
                    
                    // If more than 3 events, show count badge
                    if (events.length > 3) {
                        const countBadge = document.createElement('div');
                        countBadge.className = 'event-count';
                        countBadge.textContent = `+${events.length - 3}`;
                        countBadge.title = `${events.length} Events gesamt`;
                        dayDiv.appendChild(countBadge);
                    }
                }
            }

            return dayDiv;
        }

        // Show event details modal
        function showEventDetails(event) {
            const modal = document.getElementById('event-modal');
            const eventDate = new Date(event.date);
            const formattedDate = eventDate.toLocaleDateString('de-DE', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric' 
            });
            
            document.getElementById('modal-company-name').textContent = event.company;
            document.getElementById('modal-ticker').textContent = event.ticker;
            document.getElementById('modal-date').textContent = formattedDate;
            
            const timeText = event.time === 'pre' ? 'Pre-Market (vor Börseneröffnung)' : 
                            event.time === 'after' ? 'After-Market (nach Börsenschluss)' : 
                            'Während Handelszeit';
            document.getElementById('modal-time').textContent = timeText;
            document.getElementById('modal-eps').textContent = event.estimate;
            document.getElementById('modal-sector').textContent = getSectorName(event.sector);
            
            const importanceText = event.importance === 'high' ? 'Hoch ⭐' : 
                                  event.importance === 'medium' ? 'Mittel' : 'Niedrig';
            document.getElementById('modal-importance').textContent = importanceText;
            
            modal.classList.add('active');
            
            // Close on background click
            modal.onclick = (e) => {
                if (e.target === modal) {
                    closeEventModal();
                }
            };
        }

        function closeEventModal() {
            document.getElementById('event-modal').classList.remove('active');
        }

        // Close modal on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeEventModal();
            }
        });

        // Render list view
        function renderListView() {
            const listContainer = document.getElementById('list-container');
            listContainer.innerHTML = '';

            earningsData.forEach(event => {
                const row = document.createElement('div');
                row.className = 'earnings-list-row';
                
                const eventDate = new Date(event.date);
                const formattedDate = eventDate.toLocaleDateString('de-DE', { day: '2-digit', month: 'short', year: 'numeric' });
                
                row.innerHTML = `
                    <div class="earnings-date">${formattedDate}</div>
                    <div class="company-info">
                        <div class="company-logo" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 0.9rem;">${event.ticker.substring(0, 2)}</div>
                        <div>
                            <div class="company-name">${event.company}</div>
                            <div class="ticker">${event.ticker}</div>
                        </div>
                    </div>
                    <div>${getSectorName(event.sector)}</div>
                    <div class="estimate">${event.estimate}</div>
                    <div><span class="time-badge ${event.time}">${event.time === 'pre' ? 'Pre-Market' : event.time === 'after' ? 'After-Market' : 'During Market'}</span></div>
                    <div><span class="importance-badge ${event.importance}">${event.importance}</span></div>
                `;
                
                listContainer.appendChild(row);
            });
        }

        function getSectorName(sector) {
            const sectors = {
                'tech': 'Technologie',
                'consumer': 'Zyklischer Konsum',
                'finance': 'Finanzwerte',
                'healthcare': 'Gesundheit',
                'energy': 'Energie'
            };
            return sectors[sector] || sector;
        }

        // Update stats
        function updateStats() {
            const thisWeek = earningsData.filter(e => {
                const eventDate = new Date(e.date);
                const today = new Date();
                const weekFromNow = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
                return eventDate >= today && eventDate <= weekFromNow;
            });

            document.getElementById('stat-week').textContent = thisWeek.length;
            document.getElementById('stat-pre').textContent = earningsData.filter(e => e.time === 'pre').length;
            document.getElementById('stat-after').textContent = earningsData.filter(e => e.time === 'after').length;
            document.getElementById('stat-high').textContent = earningsData.filter(e => e.importance === 'high').length;
        }

        // Month selector change
        document.getElementById('month-select').addEventListener('change', (e) => {
            const [year, month] = e.target.value.split('-');
            generateCalendar(parseInt(year), parseInt(month) - 1);
        });

        // Initialize - Load data from API first
        async function initializeCalendar() {
            const currentDate = new Date();
            
            // Show loading state
            const calendarGrid = document.getElementById('calendar-grid');
            if (calendarGrid) {
                calendarGrid.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: #64748b;">Lade Wirtschaftsdaten...</div>';
            }
            
            // Fetch earnings data for next 3 months
            const today = new Date();
            const threeMonthsLater = new Date(today);
            threeMonthsLater.setMonth(today.getMonth() + 3);
            
            await fetchEarningsCalendar(
                today.toISOString().split('T')[0],
                threeMonthsLater.toISOString().split('T')[0]
            );
            
            // Now render calendar with real data
            generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
            updateStats();
        }

        // Call initialization
        initializeCalendar();

        // Logout
        document.querySelector('.logout-btn').addEventListener('click', () => {
            if (confirm('Möchtest du dich wirklich abmelden?')) {
                try {
                    localStorage.removeItem('capitovo_session');
                    localStorage.removeItem('capitovo_contact');
                    sessionStorage.removeItem('capitovo_logged_in');
                    sessionStorage.removeItem('capitovo_subscription_active');
                } catch(e) {}
                window.location.href = '../index.html';
            }
        });

        // Fetch cheapest price from checkout page
        async function updatePaywallPrice() {
            try {
                const response = await fetch('../checkout.html');
                const html = await response.text();
                
                // Parse HTML to find all prices
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Find all monthly prices (excluding "Einmalig")
                const priceElements = Array.from(doc.querySelectorAll('.text-4xl'));
                const monthlyPrices = priceElements
                    .map(el => {
                        const text = el.textContent;
                        // Only extract monthly prices
                        if (text.includes('/ Monat')) {
                            const match = text.match(/€\s*(\d+),-/);
                            return match ? parseInt(match[1]) : null;
                        }
                        return null;
                    })
                    .filter(price => price !== null);
                
                if (monthlyPrices.length > 0) {
                    const cheapestPrice = Math.min(...monthlyPrices);
                    const priceText = document.getElementById('paywall-price-text');
                    if (priceText) {
                        priceText.textContent = `Ab ${cheapestPrice}€/Monat · Jederzeit kündbar`;
                    }
                }
            } catch (error) {
                console.log('Could not fetch pricing:', error);
                // Keep default price of 99€
            }
        }

        // Initialize session storage from localStorage if needed
        function initializeSessionFromLocalStorage() {
            try {
                const sessionData = localStorage.getItem('capitovo_session');
                if (sessionData) {
                    const session = JSON.parse(sessionData);
                    
                    // Set sessionStorage based on localStorage session
                    sessionStorage.setItem('capitovo_logged_in', 'true');
                    
                    // Check if user has active subscription
                    const hasSubscription = session.subscription && session.subscription !== 'none';
                    sessionStorage.setItem('capitovo_subscription_active', hasSubscription ? 'true' : 'false');
                    
                    console.log('Session initialized:', {
                        logged_in: true,
                        subscription: session.subscription,
                        subscription_active: hasSubscription
                    });
                } else {
                    // No session found - clear sessionStorage
                    sessionStorage.removeItem('capitovo_logged_in');
                    sessionStorage.removeItem('capitovo_subscription_active');
                }
            } catch (e) {
                console.error('Error initializing session:', e);
            }
        }

        // Subscription Check & Paywall
        function checkSubscription() {
            // Initialize session from localStorage first
            initializeSessionFromLocalStorage();
            
            // Check if user is logged in
            const isLoggedIn = sessionStorage.getItem('capitovo_logged_in') === 'true';
            
            if (!isLoggedIn) {
                // Not logged in - show paywall
                document.body.classList.add('paywall-active');
                document.getElementById('paywall-overlay').classList.add('active');
                updatePaywallPrice(); // Update price dynamically
                return false;
            }

            // Check subscription status
            const subscriptionActive = sessionStorage.getItem('capitovo_subscription_active') === 'true';
            
            if (!subscriptionActive) {
                // Logged in but no active subscription - show paywall
                document.body.classList.add('paywall-active');
                document.getElementById('paywall-overlay').classList.add('active');
                updatePaywallPrice(); // Update price dynamically
                return false;
            }

            // Subscription active - full access
            return true;
        }

        // Run subscription check on page load
        if (!checkSubscription()) {
            console.log('Paywall active - no subscription');
        } else {
            console.log('Full access granted - active subscription');
        }

        // For testing: Simulate login/subscription
        // Uncomment these lines to test with active subscription:
        // sessionStorage.setItem('capitovo_logged_in', 'true');
        // sessionStorage.setItem('capitovo_subscription_active', 'true');
        // location.reload();
    </script>
    <script src="../script.js"></script>
</body>
</html>
