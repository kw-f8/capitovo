<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - capitovo</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Remove black outline/frame from sidebar toggle while keeping an accessible focus-visible ring */
        #menu-toggle, .menu-toggle { border: none; outline: none; background: transparent; }
        #menu-toggle:focus, .menu-toggle:focus { outline: none; box-shadow: none; }
        /* Provide a subtle visible focus for keyboard users */
        #menu-toggle:focus-visible, .menu-toggle:focus-visible { box-shadow: 0 0 0 4px rgba(59,130,246,0.12); border-radius: 8px; }
    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

    <header>
        <div class="header-content">
            <div class="logo">
                <a href="index.html">
                    <img src="assets/capitovo_logo_weiß.png" alt="capitovo Logo" class="header-logo">
                </a>
            </div>
            <a href="Abonenten/abonenten.html" id="cancel-button" class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                <svg class="-ml-1 mr-2 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                </svg>
                Abbrechen
            </a>
        </div>
    </header>

    <main class="flex-grow flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl w-full space-y-8">
            
            <!-- Top: Plans -->
            <div class="w-full">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-lg font-bold text-gray-900 mb-6">Wählen Sie Ihr Abonnement</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch mb-8">
                        <!-- Basic -->
                        <div id="card-basic" class="plan-card bg-white rounded-xl shadow-xl border-4 border-transparent p-8 flex flex-col justify-between hover:shadow-2xl transition-all duration-300 cursor-pointer" onclick="selectPlan('basic')">
                            <div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4">Basic</h3>
                                <div class="text-4xl font-extrabold text-gray-900 mb-4">
                                    € 99,- <span class="text-xl font-normal text-gray-500">/ Monat</span>
                                </div>
                                
                                <div class="plan-details w-full">
                                    <ul class="text-left space-y-3 mb-10 text-gray-700 w-full">
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Wöchentliche Markt-Bulletins
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            2 exklusive Aktienanalysen / Monat
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-red-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                            Zugang zum Performance-Dashboard
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-red-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                            Exklusive Webinare & Q&A
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <button class="select-plan-btn w-full block py-3 px-8 border border-gray-300 rounded-lg shadow-sm text-base font-medium text-gray-900 bg-white hover:bg-gray-100 transition duration-150 mt-4">Wählen</button>
                        </div>

                        <!-- Premium -->
                        <div id="card-premium" class="plan-card bg-primary-blue rounded-xl shadow-2xl border-4 border-transparent p-8 flex flex-col justify-between transform scale-105 z-10 cursor-pointer" onclick="selectPlan('premium')">
                            <div class="relative">
                                <span class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-gray-900 text-xs font-bold uppercase py-1 px-3 rounded-full shadow-md">
                                    Empfohlen
                                </span>
                                <h3 class="text-2xl font-bold text-white mb-4">Premium</h3>
                                <div class="text-4xl font-extrabold text-white mb-4">
                                    € 189,- <span class="text-xl font-normal text-blue-200">/ Monat</span>
                                </div>

                                <div class="plan-details w-full">
                                    <ul class="text-left space-y-3 mb-10 text-white w-full">
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-yellow-400 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Alle Basic-Funktionen
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-yellow-400 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            **Alle** exklusiven Aktienanalysen (4+ / Monat)
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-yellow-400 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Zugang zum Performance-Dashboard
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-yellow-400 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Exklusive Webinare & Q&A
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-yellow-400 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            14-tägige Geld-zurück-Garantie
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <button class="select-plan-btn w-full block py-3 px-8 border border-white rounded-lg shadow-lg text-base font-medium text-primary-blue bg-white hover:bg-blue-100 transition duration-150 mt-4">Wählen</button>
                        </div>
                        
                        <!-- Lifetime -->
                        <div id="card-lifetime" class="plan-card bg-white rounded-xl shadow-xl border-4 border-transparent p-8 flex flex-col justify-between hover:shadow-2xl transition-all duration-300 cursor-pointer relative overflow-hidden" onclick="selectPlan('lifetime')">
                            <div class="absolute top-0 right-0 bg-gradient-to-l from-yellow-400 to-yellow-200 text-gray-900 text-xs font-bold px-3 py-1 rounded-bl-lg shadow-sm">
                                BEST VALUE
                            </div>
                            <div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4">Lifetime</h3>
                                <div class="text-4xl font-extrabold text-gray-900 mb-4">
                                    € 4999,- <span class="text-xl font-normal text-gray-500">/ Einmalig</span>
                                </div>

                                <div class="plan-details w-full">
                                    <ul class="text-left space-y-3 mb-10 text-gray-700 w-full">
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Alle Premium-Funktionen
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Lebenslanger Zugang (inkl. Updates)
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Priorisierter E-Mail-Support
                                        </li>
                                        <li class="flex items-start">
                                            <svg class="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                            Kein monatliches Abo mehr nötig
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <button class="select-plan-btn w-full block py-3 px-8 border border-gray-300 rounded-lg shadow-sm text-base font-medium text-gray-900 bg-white hover:bg-gray-100 transition duration-150 mt-4">Wählen</button>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 pt-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-600">Zwischensumme</span>
                            <span id="summary-subtotal" class="font-medium">€ 0,-</span>
                        </div>



                        <div class="flex justify-between items-center text-xl font-extrabold text-gray-900 mt-4">
                            <span>Gesamt</span>
                            <span id="summary-total">€ 0,-</span>
                        </div>
                        <div class="mt-2 text-xs text-gray-500 text-right">
                            inkl. MwSt.
                        </div>
                    </div>
                    
                    <div class="mt-6 text-xs text-gray-500 space-y-2">
                        <div class="flex items-start">
                            <svg class="w-4 h-4 text-green-500 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>14 Tage Geld-zurück-Garantie für alle Neukunden.</span>
                        </div>
                        <div class="flex items-start">
                            <svg class="w-4 h-4 text-green-500 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Monatlich und einfach kündbar</span>
                        </div>
                        <div class="flex items-start">
                            <svg class="w-4 h-4 text-green-500 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Keine versteckten Kosten</span>
                        </div>
                        <div class="flex items-start">
                            <svg class="w-4 h-4 text-green-500 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Sichere Bezahlung mit SSL-Verschlüsselung</span>
                        </div>
                    </div>
                </div>
            </div>            <!-- Bottom: Form -->
            <!-- Left Column: Form -->
            <div class="w-full space-y-8 bg-white p-8 rounded-xl shadow-xl border border-gray-200">
                <div>
                    <h2 class="text-2xl font-extrabold text-gray-900">
                        Bestellung abschließen
                    </h2>
                    <p class="mt-2 text-sm text-gray-600">
                        Bitte geben Sie Ihre Daten ein, um das Abonnement zu aktivieren.
                    </p>
                </div>

                <form id="checkout-form" class="space-y-6">
                    
                    <!-- Personal Info -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-medium text-gray-900 border-b pb-2">Persönliche Daten</h3>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="relative">
                                <input id="checkout-name" name="name" type="text" required 
                                       class="peer appearance-none rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:ring-accent-blue focus:border-accent-blue focus:z-10 sm:text-sm" 
                                       placeholder="Vollständiger Name">
                                <label for="checkout-name" class="absolute left-3 -top-2.5 bg-white px-1 text-xs text-gray-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:bg-transparent peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-accent-blue peer-focus:bg-white">
                                    Vollständiger Name
                                </label>
                            </div>
                            <div class="relative">
                                <input id="checkout-email" name="email" type="email" required 
                                       class="peer appearance-none rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:ring-accent-blue focus:border-accent-blue focus:z-10 sm:text-sm" 
                                       placeholder="E-Mail Adresse">
                                <label for="checkout-email" class="absolute left-3 -top-2.5 bg-white px-1 text-xs text-gray-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:bg-transparent peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-accent-blue peer-focus:bg-white">
                                    E-Mail Adresse
                                </label>
                            </div>
                            
                            <!-- Address Fields -->
                            <div class="relative">
                                <input id="checkout-street" name="street" type="text" required 
                                       class="peer appearance-none rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:ring-accent-blue focus:border-accent-blue focus:z-10 sm:text-sm" 
                                       placeholder="Straße und Hausnummer">
                                <label for="checkout-street" class="absolute left-3 -top-2.5 bg-white px-1 text-xs text-gray-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:bg-transparent peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-accent-blue peer-focus:bg-white">
                                    Straße und Hausnummer
                                </label>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="relative">
                                    <input id="checkout-zip" name="zip" type="text" required 
                                           class="peer appearance-none rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:ring-accent-blue focus:border-accent-blue focus:z-10 sm:text-sm" 
                                           placeholder="PLZ">
                                    <label for="checkout-zip" class="absolute left-3 -top-2.5 bg-white px-1 text-xs text-gray-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:bg-transparent peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-accent-blue peer-focus:bg-white">
                                        PLZ
                                    </label>
                                </div>
                                <div class="relative">
                                    <input id="checkout-city" name="city" type="text" required 
                                           class="peer appearance-none rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:ring-accent-blue focus:border-accent-blue focus:z-10 sm:text-sm" 
                                           placeholder="Stadt">
                                    <label for="checkout-city" class="absolute left-3 -top-2.5 bg-white px-1 text-xs text-gray-500 transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:bg-transparent peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-accent-blue peer-focus:bg-white">
                                        Stadt
                                    </label>
                                </div>
                            </div>
                            <div class="relative">
                                <select id="checkout-country" name="country" required 
                                       class="peer appearance-none rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900 focus:outline-none focus:ring-accent-blue focus:border-accent-blue focus:z-10 sm:text-sm bg-white">
                                    <option value="DE">Deutschland</option>
                                    <option value="AT">Österreich</option>
                                    <option value="CH">Schweiz</option>
                                </select>
                                <label for="checkout-country" class="absolute left-3 -top-2.5 bg-white px-1 text-xs text-gray-500 transition-all duration-200 peer-focus:text-xs peer-focus:text-accent-blue peer-focus:bg-white">
                                    Land
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Plan Summary Box -->
                    <div id="checkout-plan-summary" class="hidden bg-blue-50 border border-blue-200 rounded-md p-4 mb-6">
                        <h4 class="text-sm font-semibold text-blue-900 uppercase tracking-wider mb-2">Gewähltes Abo</h4>
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-gray-700 font-medium" id="summary-plan-name">Premium</span>
                            <span class="text-gray-900 font-bold" id="summary-plan-price">€ 189,- / Monat</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-600">
                            <span>Zahlungsbeginn:</span>
                            <span>Heute</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-600">
                            <span>Geld-zurück-Garantie:</span>
                            <span>14 Tage</span>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-medium text-gray-900 border-b pb-2">Zahlungsmethode</h3>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input id="pay-card" name="payment-method" type="radio" value="card" checked class="h-4 w-4 text-accent-blue focus:ring-accent-blue border-gray-300">
                                <label for="pay-card" class="ml-3 flex items-center text-sm font-medium text-gray-700">
                                    <span class="mr-2">Kreditkarte</span>
                                    <svg class="h-6 w-auto text-gray-600" viewBox="0 0 38 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M35 0H3C1.3 0 0 1.3 0 3V21C0 22.7 1.3 24 3 24H35C36.7 24 38 22.7 38 21V3C38 1.3 36.7 0 35 0Z" fill="#F5F5F7"/><path d="M35 1H3C1.9 1 1 1.9 1 3V21C1 22.1 1.9 23 3 23H35C36.1 23 37 22.1 37 21V3C37 1.9 36.1 1 35 1Z" stroke="#E5E5E5" stroke-width="2"/><path d="M0 6H38V10H0V6Z" fill="#333333"/><rect x="4" y="14" width="22" height="4" rx="1" fill="#E5E5E5"/><rect x="29" y="14" width="5" height="4" rx="1" fill="#E5E5E5"/></svg>
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input id="pay-paypal" name="payment-method" type="radio" value="paypal" class="h-4 w-4 text-accent-blue focus:ring-accent-blue border-gray-300">
                                <label for="pay-paypal" class="ml-3 flex items-center text-sm font-medium text-gray-700">
                                    <span class="mr-2">PayPal</span>
                                    <svg class="h-6 w-auto" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.05 6.5C19.6 4.5 17.8 3 15.5 3H7.5C6.7 3 6 3.7 6 4.5V19.5C6 20.3 6.7 21 7.5 21H10.5L11.5 15H14.5C17.5 15 20 12.5 20 9.5C20 8.4 19.7 7.4 19.2 6.5H20.05Z" fill="#003087"/><path d="M17.5 6.5C17.05 4.5 15.25 3 12.95 3H7.5C6.7 3 6 3.7 6 4.5V15H9.5L10.5 9H13.5C16.5 9 19 11.5 19 14.5C19 15.6 18.7 16.6 18.2 17.5H19.05C21.25 17.5 23 15.75 23 13.5C23 9.6 20.5 6.5 17.5 6.5Z" fill="#009cde"/><path d="M9.5 15L8.5 21H11.5L12.5 15H9.5Z" fill="#003087"/></svg>
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input id="pay-sepa" name="payment-method" type="radio" value="sepa" class="h-4 w-4 text-accent-blue focus:ring-accent-blue border-gray-300">
                                <label for="pay-sepa" class="ml-3 flex items-center text-sm font-medium text-gray-700">
                                    <span class="mr-2">SEPA Lastschrift</span>
                                    <svg class="h-6 w-auto" viewBox="0 0 38 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="38" height="24" rx="2" fill="#F5F5F7"/><path d="M6 12H32" stroke="#333" stroke-width="2"/><path d="M6 8H16" stroke="#333" stroke-width="2"/><path d="M22 16H32" stroke="#333" stroke-width="2"/></svg>
                                </label>
                            </div>
                        </div>

                        <!-- Dynamic Payment Fields -->
                        <div id="payment-details" class="mt-4 p-4 bg-gray-50 rounded-md border border-gray-200">
                            <!-- Card Fields -->
                            <div id="card-fields" class="space-y-4">
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                    <input type="text" id="card-number" placeholder="Kartennummer" class="block w-full pl-10 border-gray-300 rounded-md shadow-sm focus:ring-accent-blue focus:border-accent-blue sm:text-sm p-2 border">
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <input type="text" id="card-expiry" placeholder="MM / JJ" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-accent-blue focus:border-accent-blue sm:text-sm p-2 border">
                                    <input type="text" id="card-cvc" placeholder="CVC" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-accent-blue focus:border-accent-blue sm:text-sm p-2 border">
                                </div>
                                <div class="flex items-center text-xs text-gray-500 mt-2">
                                    <svg class="h-4 w-4 text-green-500 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                                    Zahlungen werden sicher über Stripe verarbeitet (PCI-konform)
                                </div>
                            </div>
                            <!-- PayPal Info -->
                            <div id="paypal-fields" class="hidden text-sm text-gray-600">
                                Sie werden nach dem Klick auf "Kostenpflichtiges Abonnement jetzt abschließen" zu PayPal weitergeleitet.
                            </div>
                            <!-- SEPA Fields -->
                            <div id="sepa-fields" class="hidden space-y-4">
                                <input type="text" id="sepa-iban" placeholder="IBAN" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-accent-blue focus:border-accent-blue sm:text-sm p-2 border">
                                <input type="text" id="sepa-owner" placeholder="Kontoinhaber" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-accent-blue focus:border-accent-blue sm:text-sm p-2 border">
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center pt-4">
                        <input id="checkout-terms" name="terms" type="checkbox" required class="h-4 w-4 text-accent-blue focus:ring-accent-blue border-gray-300 rounded">
                        <label for="checkout-terms" class="ml-2 block text-sm text-gray-900">
                            Ich stimme den <a href="Rechtliches/agb.html" target="_blank" class="text-accent-blue hover:underline">AGB</a> zu und bestätige den Kauf.
                        </label>
                    </div>

                    <div class="flex items-center justify-center text-xs text-gray-500 mb-2 mt-6">
                        <svg class="w-4 h-4 text-green-500 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                        100% sichere Zahlung. SSL-verschlüsselt.
                    </div>

                    <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-gray-500 cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue transition duration-150" disabled>
                        Kostenpflichtiges Abonnement jetzt abschließen
                    </button>

                    <div class="text-center mt-4">
                        <a href="Abonenten/abonenten.html" class="text-sm text-gray-500 hover:text-gray-900 underline">Abbrechen</a>
                    </div>

                    <!-- Trusted Payment Methods Grid -->
                    <div class="mt-8 border-t border-gray-100 pt-6">
                        <p class="text-xs text-center text-gray-400 mb-3 uppercase tracking-wide font-semibold">Wir akzeptieren</p>
                        <div class="flex justify-center items-center space-x-6">
                            <!-- Visa -->
                            <svg class="h-8 w-auto" viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.965 2.05801H13.685C13.255 2.05801 12.875 2.30801 12.715 2.70801L4.43501 22.358H10.665L11.905 18.908H19.035L19.685 22.358H25.185L19.965 2.05801ZM13.585 14.258L15.335 9.45801L17.335 14.258H13.585ZM38.935 14.608C38.965 9.05801 31.265 8.75801 31.365 6.40801C31.415 5.65801 32.115 4.90801 33.665 4.75801C34.465 4.65801 36.615 4.60801 38.965 5.70801L40.115 0.308008C38.565 -0.241992 36.565 -0.491992 34.615 -0.491992C25.465 -0.491992 23.265 4.40801 23.265 8.50801C23.265 14.608 31.615 15.008 31.565 17.658C31.515 18.658 30.315 19.108 29.165 19.208C27.115 19.408 24.365 18.808 22.515 17.958L21.365 23.458C23.165 24.308 26.515 25.008 29.665 25.008C39.165 25.008 41.365 20.308 41.365 15.708L38.935 14.608ZM47.965 0.108008H42.815C41.465 0.108008 40.365 0.508008 39.765 1.90801L34.015 15.508L28.065 1.90801H22.115L31.115 22.358L28.465 28.358L34.465 28.358L47.965 0.108008ZM1.16501 0.108008L0.0150146 0.658008L2.81501 2.05801C3.21501 2.25801 3.41501 2.50801 3.56501 3.05801L12.165 22.358H18.365L11.165 0.108008H1.16501Z" fill="#1A1F71"/>
                            </svg>
                            <!-- Mastercard -->
                            <svg class="h-8 w-auto" viewBox="0 0 50 38" xmlns="http://www.w3.org/2000/svg">
                                <g fill="none" fill-rule="evenodd">
                                    <circle fill="#EB001B" cx="17" cy="19" r="17"/>
                                    <circle fill="#F79E1B" cx="33" cy="19" r="17"/>
                                    <path fill="#FF5F00" d="M25 8.373C22.92 11.26 21.696 14.95 21.696 19c0 4.05 1.224 7.74 3.304 10.627C27.08 26.74 28.304 23.05 28.304 19c0-4.05-1.224-7.74-3.304-10.627z"/>
                                </g>
                            </svg>
                            <!-- PayPal -->
                            <svg class="h-8 w-auto" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20.05 6.5C19.6 4.5 17.8 3 15.5 3H7.5C6.7 3 6 3.7 6 4.5V19.5C6 20.3 6.7 21 7.5 21H10.5L11.5 15H14.5C17.5 15 20 12.5 20 9.5C20 8.4 19.7 7.4 19.2 6.5H20.05Z" fill="#003087"/>
                                <path d="M17.5 6.5C17.05 4.5 15.25 3 12.95 3H7.5C6.7 3 6 3.7 6 4.5V15H9.5L10.5 9H13.5C16.5 9 19 11.5 19 14.5C19 15.6 18.7 16.6 18.2 17.5H19.05C21.25 17.5 23 15.75 23 13.5C23 9.6 20.5 6.5 17.5 6.5Z" fill="#009cde"/>
                                <path d="M9.5 15L8.5 21H11.5L12.5 15H9.5Z" fill="#003087"/>
                            </svg>
                            <!-- SEPA -->
                            <svg class="h-8 w-auto" viewBox="0 0 50 30" xmlns="http://www.w3.org/2000/svg">
                                <rect x="2" y="2" width="46" height="26" rx="4" stroke="#333" stroke-width="2" fill="none"/>
                                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="Arial, sans-serif" font-weight="bold" font-size="14" fill="#333">SEPA</text>
                            </svg>
                            <!-- Stripe -->
                            <svg class="h-8 w-auto" viewBox="0 0 60 25" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#635BFF" d="M59.64 14.28h-8.06c.19 1.93 1.6 2.55 3.2 2.55 1.64 0 2.96-.37 4.05-.95v3.03a8.64 8.64 0 0 1-5.02 1.17c-4.83 0-7.16-2.62-7.16-7.21 0-4.45 2.3-7.53 6.76-7.53 4.26 0 6.23 2.91 6.23 6.64 0 .74-.02 1.48-.02 1.48zM53.64 10.6c-.05-1.96-1.07-2.86-2.63-2.86-1.69 0-2.74 1.01-3.08 2.86h5.71zM24.21 2.89h-4.87v16.74h4.87V2.89zM16.5 19.63H11.6V6.2h4.9v13.43zM14.05 4.67c-1.6 0-2.6-.98-2.6-2.36 0-1.41 1.03-2.31 2.6-2.31 1.6 0 2.6.9 2.6 2.31 0 1.38-1 2.36-2.6 2.36zM32.9 6.2c-1.6 0-2.9.62-3.64 1.74V6.2h-4.87v13.43h4.87v-7.45c0-2.27 1.06-3.33 2.81-3.33.69 0 1.27.1 1.69.24v-4.1c-.34-.11-.86-.19-1.48-.19zM43.67 6.2c-1.6 0-2.9.62-3.64 1.74V6.2h-4.87v13.43h4.87v-7.45c0-2.27 1.06-3.33 2.81-3.33.69 0 1.27.1 1.69.24v-4.1c-.34-.11-.86-.19-1.48-.19zM6.72 10.9c0-2.62 2.16-4.5 5.36-4.5 1.38 0 2.72.31 3.84.81v3.55c-1.03-.64-2.19-.95-3.25-.95-1.43 0-2.14.64-2.14 1.55 0 .93.93 1.31 2.55 1.86 2.69.9 4.35 2.14 4.35 4.64 0 2.83-2.16 4.74-5.57 4.74-1.57 0-3.08-.33-4.26-.93v-3.6c1.14.76 2.57 1.12 3.76 1.12 1.5 0 2.29-.67 2.29-1.6 0-.95-.93-1.38-2.69-1.98-2.62-.88-4.24-2.12-4.24-4.71z"/>
                            </svg>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </main>

    <!-- Mini FAQ -->
    <div class="max-w-3xl mx-auto mt-12 px-4 sm:px-6 lg:px-8 mb-12">
        <h3 class="text-lg font-bold text-gray-900 mb-6 text-center">Häufig gestellte Fragen</h3>
        <div class="grid gap-6 md:grid-cols-2">
            <div class="bg-white rounded-lg shadow-sm p-5 border border-gray-100">
                <h4 class="font-medium text-gray-900 flex items-center">
                    <svg class="w-5 h-5 text-primary-blue mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Kann ich jederzeit kündigen?
                </h4>
                <p class="text-sm text-gray-600 mt-2 ml-7">Ja, absolut. Sie können Ihr Abonnement jederzeit mit nur einem Klick in Ihrem Kundenkonto zum Ende der Laufzeit kündigen. Keine versteckten Fristen.</p>
            </div>
            <div class="bg-white rounded-lg shadow-sm p-5 border border-gray-100">
                <h4 class="font-medium text-gray-900 flex items-center">
                    <svg class="w-5 h-5 text-primary-blue mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    Wie erhalte ich Zugriff?
                </h4>
                <p class="text-sm text-gray-600 mt-2 ml-7">Sofort nach der erfolgreichen Zahlung werden Sie automatisch in Ihren Mitgliederbereich weitergeleitet und haben vollen Zugriff auf alle Analysen.</p>
            </div>
            <div class="bg-white rounded-lg shadow-sm p-5 border border-gray-100">
                <h4 class="font-medium text-gray-900 flex items-center">
                    <svg class="w-5 h-5 text-primary-blue mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Gibt es eine Garantie?
                </h4>
                <p class="text-sm text-gray-600 mt-2 ml-7">Ja, wir bieten eine 14-tägige Geld-zurück-Garantie. Wenn Sie nicht zufrieden sind, erhalten Sie Ihr Geld ohne Wenn und Aber zurück.</p>
            </div>
            <div class="bg-white rounded-lg shadow-sm p-5 border border-gray-100">
                <h4 class="font-medium text-gray-900 flex items-center">
                    <svg class="w-5 h-5 text-primary-blue mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                    Welche Zahlungsmethoden gibt es?
                </h4>
                <p class="text-sm text-gray-600 mt-2 ml-7">Wir akzeptieren alle gängigen Kreditkarten (Visa, Mastercard, Amex), PayPal und SEPA-Lastschrift. Alle Zahlungen sind SSL-verschlüsselt.</p>
            </div>
        </div>
    </div>

    <footer class="site-footer mt-auto">
        <div class="footer-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col md:flex-row items-center justify-between gap-4">
            <p class="copyright text-sm text-gray-600">&copy; 2024 capitovo. Wachstum durch Wissen.</p>
            <div class="footer-links flex items-center gap-3">
                <a href="Rechtliches/impressum.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Impressum</a>
                <a href="Rechtliches/datenschutz.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Datenschutz</a>
                <a href="Rechtliches/haftung.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Haftungsausschluss</a>
                <a href="Rechtliches/agb.html" class="footer-btn" target="_blank" rel="noopener noreferrer">AGB</a>
            </div>
        </div>
    </footer>

    <script src="script.js?v=6"></script>
    <script>
        // Selection function
        window.selectPlan = function(plan) {
            if (window.updateCheckoutSummary) {
                window.updateCheckoutSummary(plan);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            let currentPlan = null; // Start with nothing selected
            
            const plans = {
                'basic': { price: '€ 99,-' },
                'premium': { price: '€ 189,-' },
                'lifetime': { price: '€ 4999,-' }
            };

            const totalEl = document.getElementById('summary-total');
            const subtotalEl = document.getElementById('summary-subtotal');
            
            window.updateCheckoutSummary = function(planKey) {
                const p = plans[planKey];
                if (!p) return;
                
                currentPlan = planKey;
                
                // Update UI Cards
                ['basic', 'premium', 'lifetime'].forEach(key => {
                    const card = document.getElementById(`card-${key}`);
                    const btn = card.querySelector('.select-plan-btn');
                    
                    if (key === planKey) {
                        // Selected
                        card.classList.remove('border-transparent', 'opacity-60', 'scale-95');
                        card.classList.add('scale-105', 'z-20', 'shadow-2xl');
                        card.style.filter = 'none';

                        if (key === 'premium') {
                             card.classList.add('border-yellow-400');
                        } else {
                             card.classList.add('border-blue-500');
                        }
                        btn.textContent = 'Ausgewählt';
                        // Professional "Selected" state: Dark/Neutral, clear indication
                        btn.classList.remove('bg-white', 'text-gray-900', 'text-primary-blue', 'border-gray-300', 'border-white', 'hover:bg-gray-100', 'hover:bg-blue-100');
                        btn.classList.add('bg-gray-900', 'text-white', 'border-transparent', 'cursor-default', 'shadow-inner');
                    } else {
                        // Not selected
                        card.classList.add('border-transparent', 'opacity-60', 'scale-95');
                        card.classList.remove('border-blue-500', 'border-yellow-400', 'scale-105', 'z-10', 'z-20', 'shadow-2xl');
                        card.style.filter = 'blur(1.5px) brightness(0.95)';

                        btn.textContent = 'Wählen';
                        
                        // Reset classes
                        btn.classList.remove('bg-gray-900', 'text-white', 'border-transparent', 'cursor-default', 'shadow-inner');
                        
                        if (key === 'premium') {
                            btn.classList.add('bg-white', 'text-primary-blue', 'border-white', 'hover:bg-blue-100');
                        } else {
                            btn.classList.add('bg-white', 'text-gray-900', 'border-gray-300', 'hover:bg-gray-100');
                        }
                    }
                });
                
                // Update totals
                if(totalEl) totalEl.textContent = p.price;
                if(subtotalEl) subtotalEl.textContent = p.price;

                // Update Summary Box
                const summaryBox = document.getElementById('checkout-plan-summary');
                if (summaryBox) {
                    summaryBox.classList.remove('hidden');
                    document.getElementById('summary-plan-name').textContent = planKey.charAt(0).toUpperCase() + planKey.slice(1);
                    document.getElementById('summary-plan-price').textContent = p.price + (planKey === 'lifetime' ? ' / Einmalig' : ' / Monat');
                }
                
                // Update URL without reload
                const url = new URL(window.location);
                url.searchParams.set('plan', planKey);
                window.history.replaceState({}, '', url);
            }

            // Pre-fill email if logged in
            try {
                const sess = JSON.parse(localStorage.getItem('capitovo_session') || '{}');
                if (sess.email) {
                    document.getElementById('checkout-email').value = sess.email;
                }
            } catch(e) {}

            // Payment Method Toggle
            const radios = document.getElementsByName('payment-method');
            const cardFields = document.getElementById('card-fields');
            const paypalFields = document.getElementById('paypal-fields');
            const sepaFields = document.getElementById('sepa-fields');

            function updatePaymentFields() {
                cardFields.classList.add('hidden');
                paypalFields.classList.add('hidden');
                sepaFields.classList.add('hidden');

                const val = document.querySelector('input[name="payment-method"]:checked').value;
                if (val === 'card') cardFields.classList.remove('hidden');
                if (val === 'paypal') paypalFields.classList.remove('hidden');
                if (val === 'sepa') sepaFields.classList.remove('hidden');
            }

            radios.forEach(r => r.addEventListener('change', updatePaymentFields));
            updatePaymentFields(); // init

            // Handle Submit
            const form = document.getElementById('checkout-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Simulate processing
                const btn = form.querySelector('button[type="submit"]');
                const originalText = btn.textContent;
                btn.disabled = true;
                btn.textContent = 'Verarbeite Zahlung...';
                btn.classList.add('bg-gray-500', 'cursor-not-allowed');

                setTimeout(() => {
                    // Success!
                    // Create or update session
                    const email = document.getElementById('checkout-email').value;
                    const name = document.getElementById('checkout-name').value;
                    
                    // Update session in localStorage
                    const sess = {
                        email: email,
                        name: name,
                        subscription: currentPlan, // Use the currently selected plan
                        ts: Date.now()
                    };
                    localStorage.setItem('capitovo_session', JSON.stringify(sess));

                    // Redirect to member area
                    window.location.href = 'Abonenten/abonenten.html';
                }, 1500);
            });

            // Validation Logic
            const submitBtn = document.querySelector('#checkout-form button[type="submit"]');
            const formInputs = document.querySelectorAll('#checkout-form input, #checkout-form select');
            
            function validateForm() {
                let isValid = true;
                
                // 1. Plan selected?
                if (!currentPlan) isValid = false;

                // 2. Required fields
                const requiredIds = ['checkout-name', 'checkout-email', 'checkout-street', 'checkout-zip', 'checkout-city', 'checkout-country', 'checkout-terms'];
                requiredIds.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) {
                        if (el.type === 'checkbox') {
                            if (!el.checked) isValid = false;
                        } else {
                            if (!el.value.trim()) isValid = false;
                        }
                    }
                });

                // 3. Payment fields
                const methodInput = document.querySelector('input[name="payment-method"]:checked');
                if (methodInput) {
                    const method = methodInput.value;
                    if (method === 'card') {
                        if (!document.getElementById('card-number').value.trim()) isValid = false;
                        if (!document.getElementById('card-expiry').value.trim()) isValid = false;
                        if (!document.getElementById('card-cvc').value.trim()) isValid = false;
                    } else if (method === 'sepa') {
                        if (!document.getElementById('sepa-iban').value.trim()) isValid = false;
                        if (!document.getElementById('sepa-owner').value.trim()) isValid = false;
                    }
                }

                // Update Button
                if (isValid) {
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('bg-gray-500', 'cursor-not-allowed');
                    submitBtn.classList.add('bg-primary-blue', 'hover:bg-blue-700');
                } else {
                    submitBtn.disabled = true;
                    submitBtn.classList.add('bg-gray-500', 'cursor-not-allowed');
                    submitBtn.classList.remove('bg-primary-blue', 'hover:bg-blue-700');
                }
            }

            // Attach listeners
            formInputs.forEach(input => {
                input.addEventListener('input', validateForm);
                input.addEventListener('change', validateForm);
            });

            // Hook into plan selection
            const originalUpdateSummary = window.updateCheckoutSummary;
            window.updateCheckoutSummary = function(planKey) {
                originalUpdateSummary(planKey);
                validateForm();
            };
            
            // Initial validation
            validateForm();

            // Handle Back/Cancel Link based on referrer
            const params = new URLSearchParams(window.location.search);
            const ref = params.get('ref');
            if (ref === 'account') {
                const cancelBtn = document.getElementById('cancel-button');
                if (cancelBtn) {
                    cancelBtn.href = 'Abonenten/konto.html';
                    // Optional: Change text to "Zurück" if desired, but "Abbrechen" fits too.
                    // cancelBtn.innerHTML = cancelBtn.innerHTML.replace('Abbrechen', 'Zurück');
                }
            }

            // Check URL params - REMOVED to prevent auto-selection on load
            /*
            const params = new URLSearchParams(window.location.search);
            const planParam = params.get('plan');
            if (planParam && plans[planParam]) {
                window.updateCheckoutSummary(planParam);
            }
            */
        });
    </script>
</body>
</html>