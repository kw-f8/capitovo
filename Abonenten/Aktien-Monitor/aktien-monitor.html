<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>capitovo — Aktien‑Monitor</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../style.css">
    <style>
        /* Header soll wie auf der Startseite aussehen (keine page-lokalen Overrides auf sticky/shadow). */
        .header-logo { position: relative; height: 80px; width: auto; }

        /* Remove black outline/frame from sidebar toggle while keeping an accessible focus-visible ring */
        #menu-toggle, .menu-toggle { border: none; outline: none; background: transparent; }
        #menu-toggle:focus, .menu-toggle:focus { outline: none; box-shadow: none; }
        #menu-toggle:focus-visible, .menu-toggle:focus-visible { box-shadow: 0 0 0 4px rgba(59,130,246,0.12); border-radius: 8px; }

        /* Monitor list + filters (combined panel) */
        .stock-panel { background: #ffffff; border-radius: 12px; border: 1px solid rgba(15,23,42,0.06); box-shadow: 0 6px 20px rgba(2,6,23,0.04); overflow: hidden; }
        .stock-filter-bar { background: transparent; padding: 0.75rem; border-radius: 0; box-shadow: none; border: none; border-bottom: 1px solid rgba(15,23,42,0.06); }
        .stock-filter-row { display:flex; flex-wrap: wrap; align-items:center; gap: 0.75rem; }
        .stock-filter-bar label { color:#0f172a; font-weight: 600; font-size: 0.88rem; white-space: nowrap; }
        .stock-filter-bar select, .stock-filter-bar input[type="search"], .stock-filter-bar button {
            height: 40px;
            padding: 0 12px;
            border-radius: 8px;
            border: 1px solid rgba(15,23,42,0.08);
            background: #ffffff;
            font-size: 0.98rem;
            color: #0f172a;
            line-height: 1;
            box-shadow: none;
            box-sizing: border-box;
        }
        .stock-filter-bar input[type="search"] { min-width: 220px; flex: 1 1 260px; }

        .stock-list { margin-top: 0; border: none; background: transparent; }
        .stock-row { display:flex; align-items:center; justify-content:space-between; gap: 12px; padding: 14px 14px; border-bottom: 1px solid rgba(15,23,42,0.06); text-decoration:none; }
        .stock-row:last-child { border-bottom: none; }
        .stock-row:hover { background: rgba(15,23,42,0.02); }
        .stock-left { display:flex; align-items:center; gap: 12px; min-width: 0; }
        .stock-logo { width: 42px; height: 42px; border-radius: 10px; border: 1px solid rgba(15,23,42,0.06); background: #ffffff; display:flex; align-items:center; justify-content:center; overflow:hidden; flex-shrink:0; }
        .stock-logo img { width: 26px; height: 26px; object-fit: contain; display:block; }
        .stock-fallback { font-weight: 800; color: #0f172a; font-size: 0.9rem; }
        .stock-name { font-weight: 700; color:#0f172a; line-height: 1.15; white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }
        .stock-meta { color:#64748b; font-size: 0.9rem; white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }
        .stock-pill { display:inline-flex; align-items:center; padding: 4px 10px; border-radius: 999px; border: 1px solid rgba(15,23,42,0.08); color:#0f172a; font-weight: 600; font-size: 0.8rem; background: rgba(255,255,255,0.9); }

        @media (max-width: 640px){
            .stock-filter-bar select, .stock-filter-bar input[type="search"], .stock-filter-bar button { height: 36px; font-size: 0.92rem; }
            .stock-row { padding: 12px 12px; }
            .stock-pill { display:none; }
        }
    </style>
</head>
<body class="bg-white text-gray-900 abonenten-page">

    <header>
        <div class="header-content">
            <div class="logo">
                <a href="/capitovo/Abonenten/abonenten.html">
                    <img src="../../assets/capitovo_logo_weiß.png" alt="capitovo Logo" class="header-logo">
                </a>
            </div>
            <button class="menu-toggle" id="menu-toggle" aria-controls="sidebar" aria-expanded="false" aria-label="Menü öffnen">☰</button>
        </div>
    </header>

    <main>
        <section class="member-grid">
            <div class="analyses-box">
                <div class="flex items-center justify-between mb-4">
                    <h1 class="text-xl font-semibold">Aktien‑Monitor</h1>
                </div>

                <p class="text-gray-600 mb-6">Wähle eine Aktie aus oder nutze Suche, Branchenfilter und Sortierung.</p>

                <div class="stock-panel" aria-label="Aktienliste">
                    <div class="stock-filter-bar">
                        <div class="stock-filter-row">
                            <label for="stock-search" class="sr-only">Suche</label>
                            <input id="stock-search" type="search" placeholder="Suche nach Unternehmen oder Kürzel" aria-label="Suche nach Unternehmen oder Kürzel">

                            <label for="stock-sector" class="sr-only">Branche</label>
                            <select id="stock-sector" aria-label="Branche filtern">
                                <option value="">Alle Branchen</option>
                            </select>

                            <label for="stock-sort" class="sr-only">Sortierung</label>
                            <select id="stock-sort" aria-label="Sortierung">
                                <option value="" selected>Keine Sortierung</option>
                                <option value="name-asc">Unternehmen A–Z</option>
                                <option value="name-desc">Unternehmen Z–A</option>
                                <option value="sector-asc">Branche A–Z</option>
                            </select>

                            <button id="stock-clear" type="button" aria-label="Suche zurücksetzen">Zurücksetzen</button>
                        </div>
                    </div>

                    <div id="stock-list" class="stock-list" aria-live="polite">
                        <div class="p-4 text-sm text-gray-500">Lade Aktien…</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer id="abo" class="site-footer" data-scroll="fade-up" data-scroll-delay="40">
        <div class="footer-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col md:flex-row items-center justify-between gap-4">
            <p class="copyright text-sm text-gray-600">&copy; 2024 capitovo. Wachstum durch Wissen.</p>

            <div class="footer-links flex items-center gap-3">
                <a href="../../Rechtliches/impressum.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Impressum</a>
                <a href="../../Rechtliches/datenschutz.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Datenschutz</a>
                <a href="../../Rechtliches/haftung.html" class="footer-btn" target="_blank" rel="noopener noreferrer">Haftungsausschluss</a>
                <a href="../../Rechtliches/agb.html" class="footer-btn" target="_blank" rel="noopener noreferrer">AGB</a>
            </div>
        </div>
    </footer>

    <!-- Sidebar (members) -->
    <div class="sidebar" id="sidebar" aria-hidden="true" aria-label="Seitenmenü">
        <button class="close-button" id="close-sidebar" aria-label="Sidebar schließen">&times;</button>
        <nav class="sidebar-nav" aria-label="Hauptnavigation">
            <ul>
                <li>
                    <a href="../abonenten.html" class="flex items-center space-x-3" aria-label="Startseite">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M3 11.5L12 4l9 7.5" />
                            <path d="M5 10.5v7.5a1 1 0 001 1h3v-5h6v5h3a1 1 0 001-1v-7.5" />
                        </svg>
                        <span>Startseite</span>
                    </a>
                </li>
                <li>
                    <div>
                        <a href="../konto.html" class="flex items-center space-x-3" aria-label="Mein Konto">
                            <svg class="w-5 h-5 flex-shrink-0" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="1.5" />
                                <path d="M6 20c0-3.333 3.333-6 6-6s6 2.667 6 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Mein Konto</span>
                        </a>
                    </div>
                </li>
                <li>
                    <a href="../alle_analysen.html" class="flex items-center space-x-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="10" width="4" height="11" rx="0.5" /><rect x="10" y="6" width="4" height="15" rx="0.5" /><rect x="17" y="3" width="4" height="18" rx="0.5" /></svg>
                        <span>Analysen</span>
                    </a>
                </li>
                <li>
                    <a href="./aktien-monitor.html" class="flex items-center space-x-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M3 17l6-6 4 4 8-8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                            <polyline points="3 17 9 11 13 15 21 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                        </svg>
                        <span>Aktien‑Monitor</span>
                    </a>
                </li>
                <li>
                    <a href="../earnings_kalender.html" class="flex items-center space-x-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <span>Wirtschaftskalender</span>
                    </a>
                </li>

                <li class="logout-bottom">
                    <a href="#" id="open-contact-modal" class="flex items-center space-x-3" aria-label="Kontakt aufnehmen">
                        <svg class="w-5 h-5 flex-shrink-0" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 6l-10 7L2 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Kontakt</span>
                    </a>
                </li>

                <li class="logout-bottom">
                    <a href="#" id="logout-link" class="logout-link" aria-label="Abmelden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <path d="M16 17l5-5-5-5" />
                            <path d="M21 12H9" />
                        </svg>
                        <span>Abmelden</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <script src="../../script.js?v=5"></script>

    <script>
        (function () {
            const stocks = [
                { name: 'Apple', ticker: 'AAPL', sector: 'Technologie', href: './aktien-monitor_apple.html', logo: '../Bilder/logos/apple_logo.svg' },
                { name: 'Microsoft', ticker: 'MSFT', sector: 'Technologie', href: './aktie-msft.html', logo: '../Bilder/logos/microsoft_logo.svg' },
                { name: 'Amazon', ticker: 'AMZN', sector: 'Konsum', href: './aktie-amzn.html', logo: '../Bilder/logos/amazon_logo.svg' },
                { name: 'Alphabet', ticker: 'GOOGL', sector: 'Technologie', href: './aktie-googl.html', logo: '../Bilder/logos/alphabet_logo.svg' },
                { name: 'Tesla', ticker: 'TSLA', sector: 'Automobil', href: './aktie-tsla.html', logo: '../Bilder/logos/tesla_logo.svg' },
                { name: 'Meta Platforms', ticker: 'META', sector: 'Technologie', href: './aktie-meta.html', logo: '../Bilder/logos/meta_logo.svg' },
                { name: 'NVIDIA', ticker: 'NVDA', sector: 'Technologie', href: './aktie-nvda.html', logo: '../Bilder/logos/nvidia_logo.svg' },
                { name: 'JPMorgan', ticker: 'JPM', sector: 'Finanzen', href: './aktie-jpm.html' },
                { name: 'Visa', ticker: 'V', sector: 'Finanzen', href: './aktie-v.html' },
                { name: 'Netflix', ticker: 'NFLX', sector: 'Medien', href: './aktie-nflx.html' },
                { name: 'Disney', ticker: 'DIS', sector: 'Medien', href: './aktie-dis.html' },
                { name: 'Alibaba', ticker: 'BABA', sector: 'Konsum', href: './aktie-baba.html' },
                { name: 'SAP', ticker: 'SAP', sector: 'Technologie', href: './aktie-sap.html' },
                { name: 'Porsche', ticker: 'P911', sector: 'Automobil', href: './porsche.html' }
            ];

            const searchEl = document.getElementById('stock-search');
            const sectorEl = document.getElementById('stock-sector');
            const sortEl = document.getElementById('stock-sort');
            const clearEl = document.getElementById('stock-clear');
            const listEl = document.getElementById('stock-list');
            if (!searchEl || !sectorEl || !sortEl || !clearEl || !listEl) return;

            function normalize(str) {
                return (str || '')
                    .toString()
                    .toLowerCase()
                    .normalize('NFD')
                    .replace(/\p{Diacritic}/gu, '')
                    .trim();
            }

            function buildSectorOptions() {
                const sectors = Array.from(new Set(stocks.map(s => s.sector).filter(Boolean)))
                    .sort((a, b) => a.localeCompare(b, 'de'));
                for (const sector of sectors) {
                    const opt = document.createElement('option');
                    opt.value = sector;
                    opt.textContent = sector;
                    sectorEl.appendChild(opt);
                }
            }

            function render(items) {
                listEl.innerHTML = '';
                if (!items.length) {
                    const empty = document.createElement('div');
                    empty.className = 'p-4 text-sm text-gray-500';
                    empty.textContent = 'Keine Treffer. Passe Suche oder Filter an.';
                    listEl.appendChild(empty);
                    return;
                }

                for (const stock of items) {
                    const row = document.createElement('a');
                    row.className = 'stock-row';
                    row.href = stock.href;

                    const left = document.createElement('div');
                    left.className = 'stock-left';

                    const logoWrap = document.createElement('div');
                    logoWrap.className = 'stock-logo';
                    if (stock.logo) {
                        const img = document.createElement('img');
                        img.src = stock.logo;
                        img.alt = `${stock.name} Logo`;
                        img.loading = 'lazy';
                        img.decoding = 'async';
                        logoWrap.appendChild(img);
                    } else {
                        const fallback = document.createElement('div');
                        fallback.className = 'stock-fallback';
                        fallback.textContent = (stock.ticker || stock.name || '?').slice(0, 1);
                        logoWrap.appendChild(fallback);
                    }

                    const textWrap = document.createElement('div');
                    textWrap.style.minWidth = '0';

                    const name = document.createElement('div');
                    name.className = 'stock-name';
                    name.textContent = stock.name;

                    const meta = document.createElement('div');
                    meta.className = 'stock-meta';
                    meta.textContent = `${stock.ticker || ''}${stock.ticker && stock.sector ? ' • ' : ''}${stock.sector || ''}`;

                    textWrap.appendChild(name);
                    textWrap.appendChild(meta);

                    left.appendChild(logoWrap);
                    left.appendChild(textWrap);

                    const pill = document.createElement('div');
                    pill.className = 'stock-pill';
                    pill.textContent = 'Details';

                    row.appendChild(left);
                    row.appendChild(pill);
                    listEl.appendChild(row);
                }
            }

            function applyFilters() {
                const q = normalize(searchEl.value);
                const sector = sectorEl.value;
                const sortVal = sortEl.value;

                let filtered = stocks.filter(s => {
                    if (sector && s.sector !== sector) return false;
                    if (!q) return true;
                    const hay = normalize(`${s.name} ${s.ticker} ${s.sector}`);
                    return hay.includes(q);
                });

                if (sortVal) {
                    const sorted = filtered.slice();
                    switch (sortVal) {
                        case 'name-asc':
                            sorted.sort((a,b) => a.name.localeCompare(b.name, 'de'));
                            break;
                        case 'name-desc':
                            sorted.sort((a,b) => b.name.localeCompare(a.name, 'de'));
                            break;
                        case 'sector-asc':
                            sorted.sort((a,b) => (a.sector||'').localeCompare(b.sector||'', 'de'));
                            break;
                        default:
                            break;
                    }
                    filtered = sorted;
                }

                render(filtered);
            }

            buildSectorOptions();
            applyFilters();

            searchEl.addEventListener('input', applyFilters);
            sectorEl.addEventListener('change', applyFilters);
            sortEl.addEventListener('change', applyFilters);
            clearEl.addEventListener('click', () => {
                searchEl.value = '';
                sectorEl.value = '';
                sortEl.value = '';
                applyFilters();
                searchEl.focus();
            });
        })();
    </script>

    <!-- Preload/modal-on-click removed — direct navigation to stock pages retained. -->
</body>
</html>
